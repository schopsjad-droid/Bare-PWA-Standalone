# ูุธุงู ุงููุตุงุฏูุฉ ุงูุดุงูู - Bare PWA

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุตุงุฏูุฉ ูุชูุงูู ูุฏุนู:
- โ ุงูุชุณุฌูู ุงูุชูููุฏู (Email + Password)
- โ Google OAuth 2.0
- โ ุชูุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุญูุงูุฉ ุฃูููุฉ ูุงููุฉ

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช (Firestore)

### ูุฌููุนุฉ `users`

```typescript
{
  uid: string;              // ูุนุฑู ุงููุณุชุฎุฏู ุงููุฑูุฏ ูู Firebase Auth
  username: string;         // ุงุณู ุงููุณุชุฎุฏู
  email: string;            // ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Unique)
  profilePic: string | null; // ุฑุงุจุท ุตูุฑุฉ ุงูููู ุงูุดุฎุตู
  googleId: string | null;   // ูุนุฑู Google (null ูููุณุชุฎุฏููู ุงูุชูููุฏููู)
  isVerified: boolean;       // ุญุงูุฉ ุงูุชูุนูู (false ููุชูููุฏูุ true ูู Google)
  createdAt: Timestamp;      // ุชุงุฑูุฎ ุฅูุดุงุก ุงูุญุณุงุจ
  lastLogin: Timestamp;      // ุขุฎุฑ ุชุณุฌูู ุฏุฎูู
}
```

---

## ๐ ููุฒุงุช ุงูุฃูุงู

### 1. ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- ูุชู ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุชููุงุฆูุงู ุจูุงุณุทุฉ **Firebase Authentication**
- ูุณุชุฎุฏู Firebase ุฎูุงุฑุฒูุฉ **bcrypt** ูุน salt ุนุดูุงุฆู
- ูุง ูุชู ุชุฎุฒูู ูููุงุช ุงููุฑูุฑ ูู Firestore

### 2. ุญูุงูุฉ ูู SQL Injection
- Firestore ูู ูุงุนุฏุฉ ุจูุงูุงุช NoSQL ูุง ุชุณุชุฎุฏู SQL
- ุฌููุน ุงูุงุณุชุนูุงูุงุช ุชุณุชุฎุฏู Firebase SDK ุงูุขูู
- ูุง ููุฌุฏ ุฎุทุฑ ูู SQL Injection

### 3. ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ูุชู ุฅุฑุณุงู ุฑุณุงูุฉ ุชูุนูู ุชููุงุฆูุงู ุนูุฏ ุงูุชุณุฌูู
- ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู ูุจู ุงูุชูุนูู
- ูุณุชุฎุฏูู Google ูุชู ุชูุนูููู ุชููุงุฆูุงู

### 4. ุญูุงูุฉ ุงูุฌูุณุงุช
- ุงุณุชุฎุฏุงู Firebase Authentication Tokens
- ุชุญุฏูุซ ุชููุงุฆู ููู tokens
- ุฅุฏุงุฑุฉ ุขููุฉ ููุฌูุณุงุช

---

## ๐ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุงูุณููุงุฑูู 1: ุงูุชุณุฌูู ุงูุชูููุฏู

```typescript
// 1. ุงููุณุชุฎุฏู ูููุฃ ูููุฐุฌ ุงูุชุณุฌูู
const { signup } = useAuth();
await signup(email, password, username);

// 2. ุงููุธุงู ูููู ุจู:
// - ุฅูุดุงุก ุญุณุงุจ ูู Firebase Auth
// - ุฅุฑุณุงู ุฑุณุงูุฉ ุชูุนูู
// - ุฅูุดุงุก ูุณุชูุฏ ูู Firestore ูุน isVerified = false
// - ุชุณุฌูู ุฎุฑูุฌ ุชููุงุฆู

// 3. ุงููุณุชุฎุฏู ููุชุญ ุงูุจุฑูุฏ ููุถุบุท ุนูู ุฑุงุจุท ุงูุชูุนูู

// 4. ุงููุณุชุฎุฏู ูุณุฌู ุงูุฏุฎูู
const { login } = useAuth();
await login(email, password);

// 5. ุงููุธุงู ูุชุญูู ูู ุงูุชูุนูู:
// - ุฅุฐุง ูู ููู ููุนููุงู: ุฑูุถ ุงูุฏุฎูู
// - ุฅุฐุง ูุงู ููุนููุงู: ุชุญุฏูุซ isVerified ูู Firestore
```

### ุงูุณููุงุฑูู 2: Google OAuth

```typescript
// 1. ุงููุณุชุฎุฏู ูุถุบุท ุนูู "ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ Google"
const { loginWithGoogle } = useAuth();
await loginWithGoogle();

// 2. ุงููุธุงู ูููู ุจู:
// - ูุชุญ ูุงูุฐุฉ Google OAuth
// - ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู Google
// - ุงูุชุญูู ูู ูุฌูุฏ ุงูุญุณุงุจ ูู Firestore

// 3. ุฅุฐุง ูุงู ุงูุญุณุงุจ ุฌุฏูุฏุงู:
// - ุฅูุดุงุก ูุณุชูุฏ ุฌุฏูุฏ ูุน isVerified = true
// - ุญูุธ googleId ูุตูุฑุฉ ุงูููู ุงูุดุฎุตู

// 4. ุฅุฐุง ูุงู ุงูุญุณุงุจ ููุฌูุฏุงู:
// - ุชุณุฌูู ุงูุฏุฎูู ูุจุงุดุฑุฉ
// - ุชุญุฏูุซ lastLogin
```

---

## ๐ง ุงูุฏูุงู ุงููุชุงุญุฉ ูู AuthContext

### `signup(email, password, username)`
- ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
- ุฅุฑุณุงู ุฑุณุงูุฉ ุชูุนูู
- ุชุณุฌูู ุฎุฑูุฌ ุชููุงุฆู

### `login(email, password)`
- ุชุณุฌูู ุฏุฎูู ุชูููุฏู
- ุงูุชุญูู ูู ุชูุนูู ุงูุจุฑูุฏ
- ุฑูุถ ุงูุฏุฎูู ุฅุฐุง ูู ููู ููุนููุงู

### `loginWithGoogle()`
- ุชุณุฌูู ุฏุฎูู ุนุจุฑ Google
- ุฅูุดุงุก ุญุณุงุจ ุชููุงุฆู ูููุณุชุฎุฏููู ุงูุฌุฏุฏ
- ุชูุนูู ุชููุงุฆู

### `logout()`
- ุชุณุฌูู ุฎุฑูุฌ ุขูู
- ูุณุญ ุจูุงูุงุช ุงูุฌูุณุฉ

### `resendVerificationEmail()`
- ุฅุนุงุฏุฉ ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุชูุนูู
- ูููุณุชุฎุฏููู ุงูุฐูู ูู ูุชูููุง ุงูุฑุณุงูุฉ

---

## ๐ง ุฑุณุงุฆู ุงูุชูุนูู

### ูุญุชูู ุงูุฑุณุงูุฉ
- ูุชู ุฅุฑุณุงููุง ุชููุงุฆูุงู ูู Firebase
- ุชุญุชูู ุนูู ุฑุงุจุท ุชูุนูู ูุฑูุฏ
- ุตุงูุญุฉ ููุฏุฉ 24 ุณุงุนุฉ

### ุชุฎุตูุต ุงูุฑุณุงูุฉ
ูููู ุชุฎุตูุต ุฑุณุงูุฉ ุงูุชูุนูู ูู:
1. Firebase Console
2. Authentication โ Templates โ Email verification
3. ุชุนุฏูู ุงููุต ูุงูุชุตููู

---

## ๐จ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุฑุณุงุฆููุง ุจุงูุนุฑุจูุฉ

| ููุฏ ุงูุฎุทุฃ | ุงูุฑุณุงูุฉ ุจุงูุนุฑุจูุฉ |
|-----------|------------------|
| `auth/email-already-in-use` | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุณุชุฎุฏู ุจุงููุนู |
| `auth/invalid-email` | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุงูุญ |
| `auth/weak-password` | ูููุฉ ุงููุฑูุฑ ุถุนููุฉ ุฌุฏุงู |
| `auth/user-not-found` | ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ |
| `auth/wrong-password` | ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ |
| `auth/too-many-requests` | ูุญุงููุงุช ูุซูุฑุฉ ุฌุฏุงูุ ูุฑุฌู ุงููุญุงููุฉ ูุงุญูุงู |

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช

```
1. ุงูุชุณุฌูู ุงูุชูููุฏู:
   User Input โ Firebase Auth โ Send Email โ Firestore (isVerified=false)
   
2. ุชูุนูู ุงูุจุฑูุฏ:
   Email Link โ Firebase Auth (emailVerified=true)
   
3. ุชุณุฌูู ุงูุฏุฎูู:
   Login โ Check emailVerified โ Update Firestore (isVerified=true)
   
4. Google OAuth:
   Google Popup โ Firebase Auth โ Firestore (isVerified=true)
```

---

## ๐ฑ ุงูุตูุญุงุช ุงููุชุงุญุฉ

### `/register`
- ูููุฐุฌ ุงูุชุณุฌูู ุงูุชูููุฏู
- ุฒุฑ Google OAuth
- ุฑุงุจุท ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

### `/login`
- ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู
- ุฒุฑ Google OAuth
- ุฑุงุจุท ูุตูุญุฉ ุงูุชุณุฌูู
- ุชูุจูู ููุชูุนูู

### `/verify-email`
- ุฅุดุนุงุฑ ุจุฅุฑุณุงู ุฑุณุงูุฉ ุงูุชูุนูู
- ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู
- ุชุนูููุงุช ุงูุชูุนูู

---

## โ๏ธ ุฅุนุฏุงุฏุงุช Firebase ุงููุทููุจุฉ

### 1. ุชูุนูู Email/Password Authentication
```
Firebase Console โ Authentication โ Sign-in method โ Email/Password โ Enable
```

### 2. ุชูุนูู Google OAuth
```
Firebase Console โ Authentication โ Sign-in method โ Google โ Enable
```

### 3. ุฅุถุงูุฉ Domain ุงููุตุฑุญ ุจู
```
Firebase Console โ Authentication โ Settings โ Authorized domains
Add: bare-android-app.web.app
```

### 4. ุชุฎุตูุต ุฑุณุงูุฉ ุงูุชูุนูู (ุงุฎุชูุงุฑู)
```
Firebase Console โ Authentication โ Templates โ Email verification
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ ุงูุชุณุฌูู ุงูุชูููุฏู:
1. ุงูุชุญ `/register`
2. ุฃุฏุฎู ุจูุงูุงุช ุตุญูุญุฉ
3. ุชุญูู ูู ูุตูู ุฑุณุงูุฉ ุงูุชูุนูู
4. ุงุถุบุท ุนูู ุฑุงุจุท ุงูุชูุนูู
5. ุณุฌู ุงูุฏุฎูู ูู `/login`

### ุงุฎุชุจุงุฑ Google OAuth:
1. ุงูุชุญ `/login` ุฃู `/register`
2. ุงุถุบุท ุนูู "ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ Google"
3. ุงุฎุชุฑ ุญุณุงุจ Google
4. ุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู ุงูุชููุงุฆู

### ุงุฎุชุจุงุฑ ููุน ุงูุฏุฎูู ูุจู ุงูุชูุนูู:
1. ุณุฌู ุญุณุงุจ ุฌุฏูุฏ
2. ุญุงูู ุชุณุฌูู ุงูุฏุฎูู ูุจู ุงูุชูุนูู
3. ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ

---

## ๐ ููุงุนุฏ Firestore Security Rules

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users collection
    match /users/{userId} {
      // Allow read if authenticated
      allow read: if request.auth != null;
      
      // Allow create only for new users
      allow create: if request.auth != null 
                    && request.auth.uid == userId;
      
      // Allow update only for own profile
      allow update: if request.auth != null 
                    && request.auth.uid == userId;
      
      // Prevent deletion
      allow delete: if false;
    }
    
    // Ads collection (example)
    match /ads/{adId} {
      allow read: if true; // Public read
      allow create: if request.auth != null 
                    && request.resource.data.isVerified == true;
      allow update, delete: if request.auth != null 
                            && request.auth.uid == resource.data.userId;
    }
  }
}
```

---

## ๐ฏ ุฃูุถู ุงูููุงุฑุณุงุช

### 1. ุงูุชุญูู ูู ุงูุชูุนูู
```typescript
const { user, userProfile } = useAuth();

// ุชุญูู ูู ุงูุชูุนูู ูุจู ุงูุณูุงุญ ุจุงูุฅุฌุฑุงุกุงุช ุงูุญุณุงุณุฉ
if (!userProfile?.isVerified) {
  return <VerifyEmailNotice />;
}
```

### 2. ุญูุงูุฉ ุงููุณุงุฑุงุช
```typescript
// ูู ุงูุตูุญุงุช ุงูุชู ุชุชุทูุจ ูุตุงุฏูุฉ
const { user, loading } = useAuth();

if (loading) return <LoadingSpinner />;
if (!user) return <Redirect to="/login" />;
```

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
```typescript
try {
  await login(email, password);
} catch (error: any) {
  // ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
  setError(error.message);
}
```

---

## ๐ฎ ููุฒุงุช ูุณุชูุจููุฉ ูุญุชููุฉ

- [ ] ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- [ ] ุชุณุฌูู ุฏุฎูู ุจู Facebook/Twitter
- [ ] ูุตุงุฏูุฉ ุซูุงุฆูุฉ (2FA)
- [ ] ุชุณุฌูู ุฏุฎูู ุจุงููุงุชู (OTP)
- [ ] ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ุงููุชุนุฏุฏุฉ
- [ ] ุณุฌู ุชุณุฌููุงุช ุงูุฏุฎูู

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู Firebase Console โ Authentication
2. ุฑุงุฌุน Firestore Database โ users collection
3. ุงูุญุต Console ูู ุงููุชุตูุญ ููุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุชูุนูู Email/Password ู Google ูู Firebase

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** Bare Team  
**ุขุฎุฑ ุชุญุฏูุซ:** ููููุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.0.0

